<header class="mini-header">
  <button class="home-btn" onclick="window.location.href='index.html'" title="Trang ch·ªß">
    <img src="logo.png" alt="Home">
  </button>
  <span class="mini-title">
    Xin ch√†o, <span id="username-display">Kh√°ch</span>
  </span>
  <button class="logout-btn" onclick="logout()" title="ƒêƒÉng xu·∫•t">üö™ ƒêƒÉng xu·∫•t</button>
</header>

<style>
  .mini-header {
    display: flex; align-items: center;
    background: #fff; box-shadow: 0 1px 8px #185adb09;
    height: 47px; min-height: 40px; padding: 0 15px 0 7px;
    border-bottom: 1.2px solid #e3e9f7;
    position: sticky; top: 0; left: 0; right: 0; z-index: 30;
    gap: 14px;
  }
  .home-btn {
    background: none; border: none;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; border-radius:50%; width: 33px; height: 33px;
    margin-right: 7px; transition: background 0.14s;
  }
  .home-btn:hover {background: #eaf3ff;}
  .home-btn img {width:21px;height:21px;}
  .mini-title {font-weight:700; font-size:1.07rem; color:#185adb; flex:1;}
  .logout-btn {
    background: linear-gradient(90deg,#3a7bd5,#4a90e2);
    color: #fff; border: none; border-radius: 6px;
    padding: 6px 12px; font-weight: 600;
    cursor: pointer; transition: background 0.2s;
    font-size: 0.92rem;
  }
  .logout-btn:hover {background: linear-gradient(90deg,#4a90e2,#3a7bd5);}
</style>

<script>
  function logout() {
    localStorage.removeItem('token');
    window.location.href = 'login.html';
  }

  const token = localStorage.getItem('token');

  if (!token) {
    // ‚õî N·∫øu kh√¥ng c√≥ token, √©p quay v·ªÅ login
    window.location.href = 'login.html';
  } else {
    try {
      const payload = JSON.parse(atob(token.split('.')[1]));
      if (payload.username) {
        document.getElementById('username-display').textContent = payload.username;
      }
    } catch (e) {
      console.error("L·ªói khi gi·∫£i m√£ token", e);
      // N·∫øu token l·ªói th√¨ c≈©ng ƒëi·ªÅu h∆∞·ªõng v·ªÅ login
      window.location.href = 'login.html';
    }
  }
</script>
